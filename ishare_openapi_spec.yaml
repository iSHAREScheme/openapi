openapi: 3.0.0
info:
  title: iSHARE API Definitions
  version: '1.2'
  description: >-
    Collection of API endpoints for iSHARE roles. The endpoints are categorised
    per role and are further explained on https://dev.ishare.eu.
  contact:
    name: iSHARE Support
    url: https://support.ishare.eu
    email: support@iSHARE.eu
servers:
  - url: https://{defaultHost}
    variables:
      defaultHost:
        default: www.example.com
paths:
  /capabilities:
    get:
      tags:
        - iSHARE Satellite
        - Authorisation Registry
        - Service Provider
        - Identity Provider
      parameters:
        - $ref: '#/components/parameters/authorization-optional'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CapabilitiesResponse'
          description: OK
      deprecated: false
      operationId: /capabilities
      summary: Retrieves iSHARE capabilities
      description: >-
        The /capabilities endpoint is required for every participant that
        provides services. The endpoint returns iSHARE capabilities (supported
        versions & optional features) of the iSHARE party. 


        The capabilities endpoint should only return the public endpoints if no
        access token is provided. If an access token is provided, the
        capabilities endpoint will also provide the restricted endpoints. A
        party may also have private endpoints, which are endpoints for their own
        internal organization, also known as endpoints that are implemented, but
        not to share with the others. These endpoints are not within the scope
        of iSHARE and should not be returned to other iSHARE parties.


        Server response is an iSHARE signed JSON Web Token. Please refer to the
        models 'jwt_header' and 'jwt_payload_capabilities_token' which indicate
        what the decoded response will look like.
  /trusted_list:
    get:
      tags:
        - iSHARE Satellite
      parameters:
        - $ref: '#/components/parameters/authorization-required'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TrustedListResponse'
          description: OK
      deprecated: false
      security:
        - Bearer: []
      operationId: /trusted_list
      summary: Retrieves list of trusted certificate authorities
      description: >
        Used to obtain the iSHARE list of trusted certificate authorities
        (currently, eIDAS certificate issuer certificate authorities). 


        Server response is an iSHARE signed JSON Web Token. Please refer to the
        models 'jwt_header' and 'jwt_payload_trusted_list_token' which indicate
        what the decoded response will look like.
  /parties/{party_id}:
    get:
      tags:
        - iSHARE Satellite
      parameters:
        - style: simple
          name: party_id
          description: The id of the party whose record must be fetched
          schema:
            type: string
            example: EU.EORI.NL123456789
          in: path
          required: true
        - $ref: '#/components/parameters/authorization-required'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartyResponse'
          description: OK
      deprecated: false
      security:
        - Bearer: []
      operationId: /parties/{party_id}
      summary: Retrieves one party
      description: >-
        Used to obtain information on an iSHARE participant from the iSHARE
        Satellite. It returns exact participant matched using its ID.


        Server response is an iSHARE signed JSON Web Token. Please refer to the
        models 'jwt_header' and 'jwt_payload_party_token' which indicate what
        the decoded response will look like.
  /parties:
    get:
      tags:
        - iSHARE Satellite
      parameters:
        - style: form
          explode: true
          name: active_only
          description: Optional parameter used to search by party's  "Active" status.
          schema:
            type: boolean
            example: true
          in: query
        - style: form
          explode: true
          name: name
          description: >-
            Optional parameter used to search by party's name. Can contain a
            single * as wildcard.
          schema:
            type: string
            example: '*Corporation'
          in: query
        - style: form
          explode: true
          name: eori
          description: >-
            Optional parameter used to search by party's ID (EORI). Can contain
            a single * as wildcard.
          schema:
            type: string
            example: EU.EORI.NL123456789
          in: query
        - style: form
          explode: true
          name: certified_only
          description: >-
            Search for parties that play one of the certified roles as defined
            in iSHARE role framework.
          schema:
            type: boolean
            example: true
          in: query
        - style: form
          explode: true
          name: date_time
          description: Search parties with specific adherence date
          schema:
            format: date-time
            type: string
            example: '2023-01-31T00:00:00.000Z'
          in: query
        - style: form
          explode: true
          name: adherenceStatus
          description: >-
            Search for parties with adherence status like "Active",
            "Revoked","Not Active", "Pending"
          schema:
            type: string
            example: Active
          in: query
        - style: form
          explode: true
          name: adherenceStartdate
          description: Search parties with specific adherence start date
          schema:
            format: date-time
            type: string
            example: '2023-01-31T00:00:00.000Z'
          in: query
        - style: form
          explode: true
          name: adherenceEnddate
          description: Search parties with specific adherence end date
          schema:
            format: date-time
            type: string
            example: '2023-01-31T00:00:00.000Z'
          in: query
        - style: form
          explode: true
          name: registarSatelliteID
          description: Search parties by their registrar satellite's ID (EORI) number
          schema:
            type: string
            example: EU.EORI.NL012345678
          in: query
        - style: form
          explode: true
          name: webSiteUrl
          description: Search a party by their website URL
          schema:
            type: string
            example: https://www.example.com
          in: query
        - style: form
          explode: true
          name: companyEmail
          description: Search a party by their email ID
          schema:
            type: string
            example: John.doe@example.com
          in: query
        - style: form
          explode: true
          name: companyPhone
          description: Search a party by their company phone number
          schema:
            format: int32
            type: integer
          in: query
        - style: form
          explode: true
          name: publiclyPublishable
          description: >-
            Search parties whose general company contact information is allowed
            to be published
          schema:
            type: boolean
            example: true
          in: query
        - style: form
          explode: true
          name: tags
          description: >-
            Search parties who match any of the keywords that they have added in
            their participant information under tags. It is a free text field
            and can contain any value
          schema:
            type: string
            example: mobility
          in: query
        - style: form
          explode: true
          name: framework
          description: >-
            Search parties based on which framework they were onboarded with.
            Currently parties can only be registered with "iSHARE" framework
          schema:
            type: string
            example: iSHARE
          in: query
        - style: form
          explode: true
          name: subjectName
          description: >-
            Search parties based on the subject name of their PKI (x509)
            certificates. Usually to find a party who is requesting tokens
          schema:
            type: string
            example: >-
              SERIALNUMBER=EU.EORI.US000000005,CN=CFMInternational,O=CFMInternational,C=US
          in: query
        - style: form
          explode: true
          name: role
          description: >-
            Search parties based on their roles as defined in iSHARE role
            framework. Possible roles are ServiceConsumer, ServiceProvider, 
            EntitledParty, AuthorisationRegistry, IdentityProvider,
            IdentityBroker  and iShareSatellite.
          schema:
            type: string
            example: ServiceConsumer
          in: query
        - style: form
          explode: true
          name: loA
          description: >-
            Search parties based on their level of assurance which is registered
            in the participant list. Possible values are Low/Substantial/High
          schema:
            type: string
            example: Substantial
          in: query
        - style: form
          explode: true
          name: compliancyVerified
          description: >-
            Search parties that have their compliance to framework verified or
            not.
          schema:
            type: boolean
            example: true
          in: query
        - style: form
          explode: true
          name: legalAdherence
          description: >-
            Search parties that have signed the appropriate legal agreements and
            that have been verified during or after onboarding. Parties adhering
            to legal agreements are legally obliged to adhere to terms of use of
            data.
          schema:
            type: boolean
            example: true
          in: query
        - style: form
          explode: true
          name: authorizationRegistryID
          description: >-
            Search parties based on their authorisation registry provider. The
            ID (EORI) of the authorisation registry must be provided in search
            parameter and this must be listed as authorisation registry in the
            participant record
          schema:
            type: string
            example: EU.EORI.NL000000004
          in: query
        - style: form
          explode: true
          name: authorizationRegistryName
          description: >-
            Search parties based on their authorisation registry provider. The
            name of the authorisation registry must be provided in search
            parameter and this must be listed as authorisation registry in the
            participant record
          schema:
            type: string
            example: Askme anything
          in: query
        - style: form
          explode: true
          name: dataSpaceID
          description: >-
            Search parties based on data-spaces they participate in. The ID of
            the data-space must be provided
          schema:
            type: string
            example: EU.DSP.NLLOGISTICS_DLDS
          in: query
        - style: form
          explode: true
          name: dataSpaceTitle
          description: >-
            Search parties based on data-spaces they participate in. The name of
            the data-space must be provided
          schema:
            type: string
            example: Dutch Mobility Dataspace
          in: query
        - style: form
          explode: true
          name: countriesOfOperation
          description: >-
            Search parties by name of country they list as their country of
            operation
          schema:
            type: string
            example: Belgium
          in: query
        - style: form
          explode: true
          name: sectorIndustry
          description: Search parties by name of sector they list as their sector/industry
          schema:
            type: string
            example: Energy
          in: query
        - style: form
          explode: true
          name: page
          description: >-
            The parties API by default uses pagination. Each page size is fixed
            at 10 parties per page. When search results into more then 10
            parties, the page parameter must be added for next pages
          schema:
            format: int32
            type: integer
            example: 2
          in: query
        - style: form
          explode: true
          name: certificate_subject_name
          description: >-
            Search parties based on the subject name of their PKI (x509)
            certificates. Usually to find a party who is requesting tokens
          schema:
            type: string
            example: >-
              SERIALNUMBER=EU.EORI.US000000005,CN=CFMInternational,O=CFMInternational,C=US
          in: query
        - $ref: '#/components/parameters/authorization-required'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartiesResponse'
          description: ''
      deprecated: false
      operationId: /parties
      summary: Lists and searches parties
      description: >-
        Search for participant information from your satellite. Various search
        parameters are supported as shown below. When results are more then 10
        participants, pagination is used in response and each page contains up
        to 10 participants.


        Server response is an iSHARE signed JSON Web Token. Please refer to the
        models 'jwt_header' and 'jwt_payload_party_token' which indicate what
        the decoded response will look like.
  /versions:
    get:
      tags:
        - iSHARE Satellite
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/VersionsResponse'
          description: OK
      deprecated: false
      operationId: /versions
      summary: Retrieves active and planned versions of iSHARE
      description: >-
        Retrieves active and planned versions of iSHARE. By default returns
        current state. Server response is an iSHARE signed JSON Web Token.
        Please refer to the models 'jwt_header' and 'jwt_payload_versions_token'
        which indicate what the decoded response will look like. 
  /dataspaces:
    get:
      tags:
        - iSHARE Satellite
      parameters:
        - $ref: '#/components/parameters/authorization-required'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataspacesResponse'
          description: OK
      deprecated: false
      operationId: /dataspaces
      summary: Retrieves list of dataspaces
      description: >-
        Used to obtain a list of dataspaces. 


        Server response is an iSHARE signed JSON Web Token. Please refer to the
        models 'jwt_header' and 'jwt_payload_dataspaces_token' which indicate
        what the decoded response will look like.
  /connect/token:
    post:
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              required:
                - grant_type
                - scope
                - client_id
                - client_assertion_type
                - client_assertion
              type: object
              properties:
                grant_type:
                  description: OAuth 2.0 grant type. MUST contain “client_credentials”
                  type: string
                  example: client_credentials
                scope:
                  description: >-
                    OAuth 2.0 scope. MUST contain iSHARE scope value. Other
                    values allow the Service Consumer to get tokens that do not
                    include all rights the Service Consumer has. According to
                    RFC 6749, scopes are case-sensitive.
                  type: string
                  example: iSHARE
                client_id:
                  description: >-
                    Used in iSHARE for all client identification for
                    OAuth/OpenID Connect. MUST contain a valid iSHARE identifier
                    of the Service Consumer
                  type: string
                  example: EU.EORI.NL123456789
                client_assertion_type:
                  description: >-
                    Used in iSHARE for all client identification for
                    OAuth/OpenID Connect. MUST contain
                    “urn:ietf:params:oauth:client-assertion-type:jwt-bearer”
                  type: string
                  example: urn:ietf:params:oauth:client-assertion-type:jwt-bearer
                client_assertion:
                  description: >-
                    Used in iSHARE for all client identification for
                    OAuth/OpenID Connect. MUST contain JWT token conform iSHARE
                    specifications, signed by the client.
                  type: string
                  example: >-
                    eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsIng1YyI6WyJNSUlFZ1RDQ0FtbWdBd0lCQWdJSU45VmlDRGkzQndzd0RRWUpLb1pJaHZjTkFRRUxCUUF3U0RFWk1CY0dBMVVFQXd3UWFWTklRVkpGVkdWemRFTkJYMVJNVXpFTk1Bc0dBMVVFQ3d3RVZHVnpkREVQTUEwR0ExVUVDZ3dHYVZOSVFWSkZNUXN3Q1FZRFZRUUdFd0pPVERBZUZ3MHhPVEF5TVRVeE1UUTJNVFZhRncweU1UQXlNVFF4TVRRMk1UVmFNRUl4RlRBVEJnTlZCQU1NREVGQ1F5QlVjblZqYTJsdVp6RWNNQm9HQTFVRUJSTVRSVlV1UlU5U1NTNU9UREF3TURBd01EQXdNVEVMTUFrR0ExVUVCaE1DVGt3d2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUMwTzRoVWhEK1ZvT0tWSVpTTk1OVGZ6YzBPMmtZaitaenBRRUFCWkd0UHR5MGtLUEplcDArbzV4c3RvdTFLK1V4dkhmeEVwSHhIR1RkdHFadWMyOExoVTRDZUNnb2VETURUK0NIUzNOb3NpRVNRTXdoL1paZVRjOS9lS0NvNTY5R0NuKzJYdFRpR1NwQlN3TVNXcU5IZ3BBWllLZEhyVC9rRU1JeVRLb2F1dWlLUThjVXA3b3c3bVp6LzlLK3FWM3M5TDAzMFc4SWF3TEpCSksvMmFwQXQ1amgxajQvbUY3ZjBxOHpoemhyQzh2MDFQTGxaZHVUempqQnJlN216K3lpL3ZsWXovZWFwMGVZVGpoeElhdHlWOUZGd2xtaTRGQzFDTmNNdExoOG5zaUpvZTVjQm0xM0xLYlFGdTNHWUg3Nm9lTFp2V3FiUGJwMTFteGxIYS9LZEFnTUJBQUdqZFRCek1Bd0dBMVVkRXdFQi93UUNNQUF3SHdZRFZSMGpCQmd3Rm9BVUZqem5JT25XbE84ZjVhTHh1UHkrNnQ4c040RXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUhBd0V3SFFZRFZSME9CQllFRkFQSCs4VXJZaVZMWGFLUFJHZmxrQStjdXNRN01BNEdBMVVkRHdFQi93UUVBd0lGb0RBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQWdFQVlsNXRXSDBZdFlTOUp5cXlsWkpXb21BNTVTaEtsbGFCUmN2cm82Q0h4bGxKV0hvMHFDOVpUTWN2Q3l3TXYxNFZKeVFkNmVGWnFjVnRPbHVHclJaQmtsSDlBYW5rb3ZwMkpMYXFjRDc5dDFDeXVYWm5JelRGbC9Ca01zRTZ3bEFKWFkvc2Fybm94ZWllalA0RS9FZi8wZXVJRnZCYUlDQ0YrS2QyV0pZYmJuMFd5MGRINDg0UUpiSHlNdFZmcjQyb0lwVU5WdUxTdTg0eUtZQWVtOUpCdVlUcDNZMEsyaGlFQVcvYk9LRHZ2SGV0VmY1ZnU2NnlmZWtEWDUzajNOS2lGSkNYUzJyS0lab0R1TUZ1eHBTeVZrUzJrYldrMSs1Sm95N3FPU05BTlJGUGxwSGNnekxRWnA4SHJndmhzbWhJdDFWVFZZa3l4Y2Q4cVhBbGh3cVZnT3E1TmdMeGtxdWw5aE5NR2lNN3NxK0g3M1EvRmk4aWY3Z1A4SVZBU3pRR3d1SGcyWjg3aWI2QTJ2b24wZlJKWnEzZkl1YkhveEk2M0FUd2ZjUks4NnkxNzJ4YkZFM1ZVMGR1TjF0STVaMFRDZzBHQUpZdEpwYm52ZXhJdDVsazVGSWs0VGh2UjBMOG1OTHkxRFVhMTFOK0VNeGtxYmZxbFR1ckI4WmczQ1kvUWFTS21YWTVDTVV3V2VFQlhSSGh5ZmtaUTVqUFBVSHJGYW95T1JYOHAxRXJZRGt0QjFLOW80am11RVZwQjMzY3ZnWUJFaUF5VjV6NDQyNkZ1VkNNYkhhRkRWN2lLVzllQmxYb3hlWm80WFg4K2pYeVNMNUdXOFh3TlJUSzVjNHZXMDJRM1ZKeVlWZTV1bWVzdHNLUStMUjhpQXpvVVNyZUsxOCtKa0FqQUpVPSJdfQ.eyJpc3MiOiJFVS5FT1JJLk5MMDAwMDAwMDAxIiwic3ViIjoiRVUuRU9SSS5OTDAwMDAwMDAwMSIsImp0aSI6ImE1MjJjZWZkNGNmNjQyMWE4ZGUzOGJjYjBjMDhlYjliIiwiaWF0IjoxNTU2MDM0NzM0LCJuYmYiOjE1NTYwMzQ3MzQsImV4cCI6MTU1NjAzNDc2NCwiYXVkIjoiRVUuRU9SSS5OTDAwMDAwMDAwMCJ9.SU59EXhAukbDVP0Y8Yb_1-5Za7QCgAtgq_bh9qRKNY0t3P7nodr2b6ue2DqmIZ_bvysC77zX01QCiCCT3vT7iU4ee4HINMP9gsujoNC0L1ONL2twoJeE91hWUke8dBL9m_ipP0x5-XivQAdS9vJTHQu1A_m5VB0O_XD4JGLwrwjD2d-UE4Fhyy4ilKSPKFpqhoAi2qPkmonZki-RaYoPkrq49LW_v8OVKW7yFJvEDIwph0hEcWxl0udyeu3Cy35NWMnLZdu6gp2f4yxOq3FPrufO5bT0aihioI04V8avggzVJdVcrDTK9Q0Hzhs-22VamkncUZqPvRmo_uwypNHFBg
        required: true
      tags:
        - iSHARE Satellite
        - Authorisation Registry
        - Service Provider
        - Identity Provider
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ConnectTokenResponse'
          description: OK
      deprecated: false
      operationId: /connect/token
      summary: Obtains access token
      description: >-
        Used to obtain an OAuth access token from the Satellite. The access
        token must be added under "Authorisation" header attribute for secured
        endpoints. Refer to relevant endpoints on proper usage.
  /ep_creation:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EpCreationRequest'
        required: true
      tags:
        - iSHARE Satellite
      parameters:
        - $ref: '#/components/parameters/authorization-required'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EpCreationResponse'
              example: ''
          description: ''
      deprecated: false
      operationId: /ep_creation
      summary: Create Entitled Party
      description: >-
        Used to programatically create an Entitled Party, without providing a
        certificate.


        Both the request body and the http 200 response body contain a signed
        JSON Web Token. Please refer to the models 'jwt_header' and
        'jwt_payload_ep_creation_token' which indicate what the decoded request
        and response look like.
  /service:
    get:
      tags:
        - Service Provider
      parameters:
        - $ref: '#/components/parameters/authorization-required'
        - $ref: '#/components/parameters/delegation_evidence_header'
        - $ref: '#/components/parameters/service_consumer_id_token_sc'
        - $ref: '#/components/parameters/purpose'
        - $ref: '#/components/parameters/service_headers'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/service_content'
          description: OK
      operationId: /service
      summary: >-
        Abstract endpoint for Service Provider (parameters apply to other HTTP
        methods as well)
      description: >-
        This is an abstract service (business specific) endpoint to show how any
        Service Provider that adheres to iSHARE MUST apply iSHARE conformant
        OAuth to every iSHARE enabled service.

        Request can make use of any HTTP method and can contain any extra
        headers. For convenience this documentation only defines the GET method.
        Parameters are undefined because they vary for each Service Provider due
        to their business specific logic. Note: Additional headers for security,
        statefulnes, application functionality could be added and is out of
        scope of this specification.
  /delegation:
    post:
      requestBody:
        description: >-
          Delegation Mask that defines of which delegation the delegation
          evidence is requested.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DelegationRequestBody'
        required: true
      tags:
        - Authorisation Registry
      parameters:
        - $ref: '#/components/parameters/authorization-required'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DelegationResponse'
          description: ''
      operationId: /delegation
      summary: Obtains delegation evidence
      description: >-
        Used to obtain delegation evidence from an Authorization Registry. The
        response is a signed JSON Web Token. Please refer to the models
        ‘jwt_header’ and ‘jwt_payload_delegationevidence’ which indicate what
        the decoded response will look like. Please refer to the iSHARE language
        of delegation in order to understand the decoded response data model.
  /connect/userinfo:
    get:
      tags:
        - Identity Provider
      parameters:
        - $ref: '#/components/parameters/authorization-required'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserinfoResponse'
          description: OK
      deprecated: false
      operationId: /connect/userinfo
      summary: Obtaining attributes of a Human Service Consumer
      description: >-
        OpenID Connect endpoint for obtaining attributes of a Human Service
        Consumer conform scope defined in access token.


        Server response is an iSHARE signed JSON Web Token. Please refer to the
        models 'jwt_header' and 'jwt_payload_userinfo_token' which indicate what
        the decoded response will look like.
  /connect/authorize:
    post:
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              required:
                - response_type
                - scope
                - client_id
                - request
              type: object
              properties:
                response_type:
                  description: >-
                    OAuth 2.0 Response Type. For iSHARE using the Authorization 
                    Code Flow, with value ‘code’ is REQUIRED. MUST be identical 
                    to the response_type value in the request JWT.
                  type: string
                  example: response_type
                scope:
                  description: >-
                    OAuth 2.0 scope for OpenID Connect 1.0. MUST contain the 
                    ‘openid’ scope value and one or more scopes identifying the 
                    attributes from the Human Service Consumer that are 
                    requested. Supported scopes under iSHARE are described on 
                    the Technical Agreements page, in the Human2Machine 
                    interaction section. MUST be identical to the scope value 
                    in the request JWT. Scope values determine the permissions 
                    to be asked to the user.
                  type: string
                  example: scope
                client_id:
                  description: >-
                    OpenID Connect 1.0 client ID. Used in iSHARE for all client 
                    identification for OAuth/OpenID Connect. MUST contain a 
                    valid iSHARE identifier. MUST be identical to the client_id 
                    value in the request JWT.
                  type: string
                  example: client_id
                request:
                  description: >-
                    OpenID Connect 1.0 signed JWT containing all request 
                    parameters. See also Generic iSHARE JWT specifications for 
                    a.o. basic content and signing requirements. Additionally 
                    JWT MUST be encrypted using JWE as a user can access this 
                    JWT itself and decode the data contained therein.
                  type: string
                  example: request
        required: true
      tags:
        - Identity Provider
      parameters:
        - $ref: '#/components/parameters/content-type_form'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/openid-authorize'
          description: OK
      deprecated: false
      operationId: /authorize
      summary: Redirect human service consumer for authentication
      description: >-
        OpenID Connect endpoint for redirecting Human Service Consumer for 
        authentication by the Identity Provider. Server response is directed  to
        the /service_provider/openid_connect1.0/return endpoint.
  /login:
    post:
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              required:
                - username
                - password
              type: object
              properties:
                username:
                  description: >-
                    Human user’s login name. Could be email, mobile phone 
                    number, nickname etc.
                  type: string
                  example: username
                password:
                  description: Human user’s password.
                  example: password
        required: true
      tags:
        - Identity Provider
      parameters:
        - $ref: '#/components/parameters/content-type_form'
      responses:
        '200':
          description: >-
            Login was successful and single page application will be responsible
            for redirection to returnUrl parameter.
        '302':
          description: >-
            Login was successful and back-end application redirects user to
            returnUrl parameter by itself.
      deprecated: false
      operationId: /login
      summary: Allow Conformance Test Tool (CTT) to login
      description: >-
        The /login endpoint is required in order to pass Conformance Test Tool
        (CTT). The endpoint allows user to authenticate himself using username
        and password. After successful authentication if user grants permit to
        requested scopes redirection to Service Provider should happen.
  /return:
    get:
      tags:
        - Service Provider
      operationId: /return
      summary: Receiving the redirect from the Identity Provider
      description: >-
        OpenID Connect 1.0 endpoint for receiving the redirect from the Identity
        Provider or Identity Broker after successful human authentication.
      parameters:
        - name: code
          in: query
          description: >-
            Authorization code which is going to be used to request for an
            access token. The authorization code MUST expire shortly after it is
            issued to mitigate the risk of leaks. A maximum authorization code
            lifetime of 10 minutes is RECOMMENDED. The client MUST NOT use the
            authorization code more than once.
          required: true
          deprecated: false
          schema:
            type: string
        - name: state
          in: query
          description: >-
            OpenID Connect 1.0 opaque value used to maintain state between the
            request and the callback. The Service Provider needs to verify if
            initially sent value towards authorize endpoint is equal to this
            returned value.
          required: true
          deprecated: false
          schema:
            type: string
      responses:
        '200':
          description: >-
            On successful user redirect to the Service Provider, the Service
            Provider needs to verify state parameter and make use of code
            parameter in order to retrieve the access token. There are no
            specific response requirements for this endpoint.
components:
  schemas:
    SchemeRole:
      title: SchemeRole
      type: object
      properties:
        role:
          nullable: true
          description: >-
            Possible roles are ServiceConsumer, ServiceProvider,  EntitledParty,
            AuthorisationRegistry, IdentityProvider, IdentityBroker  and
            iShareSatellite.
          type: string
    Adherence:
      title: Adherence
      description: >-
        Adherence details of a party. Object which contains status and validity
        timestamps of the party.
      required:
        - status
        - start_date
        - end_date
      type: object
      properties:
        status:
          description: >-
            Status of the party. Available values are Active, Pending, NotActive
            and Revoked.
          type: string
          example: Active
        start_date:
          format: date-time
          description: >-
            UTC timestamp which states since when adherence status has
            established.
          type: string
          example: '2023-01-31T00:00:00.000Z'
        end_date:
          format: date-time
          description: >-
            UTC timestamp which states till when adherence status has
            established.
          type: string
          example: '2024-02-01T00:00:00.000Z'
    FeatureObject:
      title: FeatureObject
      required:
        - id
        - feature
        - description
        - url
      type: object
      properties:
        id:
          description: Unique identifier of the feature.
          type: string
          example: A51D413F-B3CC-477D-96C4-E37A9003BFE3
        feature:
          description: Friendly name of the feature.
          type: string
          example: capabilities
        description:
          description: Short description about the feature.
          type: string
          example: Retrieves iSHARE capabilities
        url:
          description: URL to the feature.
          type: string
          example: https://www.example.com/capabilities
        token_endpoint:
          nullable: true
          description: >-
            URL where access token for the feature could be retrieved. This is
            optional because if feature is access token, it is not needed to
            mention it twice.
          type: string
          example: https://www.example.com/connect/token
    SupportedFeature:
      title: SupportedFeature
      type: object
      properties:
        public:
          nullable: true
          description: Contains supported public features.
          type: array
          items:
            $ref: '#/components/schemas/FeatureObject'
        restricted:
          nullable: true
          description: >-
            Contains supported restricted features. The structure and parameters
            are exactly the same as defined in public parameter above. It should
            only be shown to the parties which provided a valid access token. If
            an access token was not provided or restricted endpoints does not
            exist, this value can be not returned, empty or null.
          type: array
          items:
            $ref: '#/components/schemas/FeatureObject'
    jwt_header:
      title: jwt_header
      required:
        - alg
        - typ
        - x5c
      type: object
      properties:
        alg:
          description: MUST be "RS256" algorithm
          type: string
          example: RS256
        typ:
          description: Type must be "JWT"
          type: string
          example: JWT
        x5c:
          description: base64 encoded DER certificate chain value
          type: array
          items:
            type: string
    jwt_payload_party_token:
      title: jwt_payload_party_token
      required:
        - iss
        - sub
        - aud
        - jti
        - exp
        - iat
        - party_info
      type: object
      properties:
        iss:
          description: The id of the issuer of this JWT.
          type: string
          example: EU.EORI.NL123456789
        sub:
          description: The id of the subject of this JWT.
          type: string
          example: EU.EORI.NL123456789
        aud:
          description: The id of the audience of this JWT.
          type: string
          example: EU.EORI.NL123456789
        jti:
          description: JTI value of JWT.
          type: string
          example: 378a47c4-2822-4ca5-a49a-7e5a1cc7ea59
        exp:
          format: int32
          description: UNIX timestamp in seconds until when this JWT is valid.
          type: integer
          example: 1504684475
        iat:
          format: int32
          description: UNIX timestamp in seconds when this JWT was issued.
          type: integer
          example: 1504683475
        party_info:
          allOf:
            - $ref: '#/components/schemas/Party'
            - {}
    Party:
      title: Party
      required:
        - party_id
        - party_name
        - registrar_id
        - adherence
        - agreements
        - roles
      type: object
      properties:
        party_id:
          description: Identifier of the party as registered. Should be EORI number.
          type: string
          example: EU.EORI.US000000005
        party_name:
          description: Name of the party.
          type: string
          example: Example Corporation
        capability_url:
          description: Capabilities endpoint of the party.
          pattern: ''
          type: string
          example: https://www.example.com/capabilities
        registrar_id:
          description: >-
            Identifier of the party who registered the participant identified by
            the party_id attribute above
          type: string
          example: EU.EORI.NL123456789
        adherence:
          allOf:
            - $ref: '#/components/schemas/Adherence'
            - {}
        additional_info:
          allOf:
            - $ref: '#/components/schemas/AdditionalInfo'
            - {}
        agreements:
          description: >-
            Object which contains details about contracts including data space
            contracts that party has agreed and signed to.
          type: array
          items:
            $ref: '#/components/schemas/Agreement'
          example:
            - type: TermsOfUse
              title: TOU
              status: Accepted
              sign_date: '2023-01-31T00:00:00.000Z'
              expiry_date: '2024-01-31T00:00:00.000Z'
              hash_file: 614331b0003219f2d2d123b0cd6105fb
              framework: iSHARE
              dataspace_id: ''
              dataspace_title: ''
              complaiancy_verified: 'yes'
            - type: AccessionAgreement
              title: AA
              status: Accepted
              sign_date: '2023-01-31T00:00:00.000Z'
              expiry_date: '2024-01-31T00:00:00.000Z'
              hash_file: f50a036402b3b243910ce572930be9f5
              framework: iSHARE
              dataspace_id: ''
              dataspace_title: ''
              complaiancy_verified: 'yes'
        certificates:
          description: >-
            Object which contains the details of the PKI/x509 certificates of
            the party. Either certificates or SPOR must be present.
          type: array
          items:
            $ref: '#/components/schemas/Certificate'
          example:
            - subject_name: >-
                SERIALNUMBER=EU.EORI.US000000005,CN=CFMInternational,O=CFMInternational,C=US
              certificate_type: Pkio
              enabled_from: '2023-01-31T00:00:00.000Z'
              x5c: ''
              x5t#s256: ''
        spor:
          allOf:
            - $ref: '#/components/schemas/Spor'
            - {}
        roles:
          description: >-
            Object which contains details about the iSHARE roles of the party.
            The details include the level of assurance as well as compliance
            status for each role.
          type: array
          items:
            $ref: '#/components/schemas/Role_definition'
          example:
            - role: ServiceConsumer
              start_date: '2023-01-31T00:00:00.000Z'
              end_date: '2024-01-31T00:00:00.000Z'
              loa: High
              compliancy_verified: true
              legal_adherence: true
        auth_registries:
          description: >-
            Object which contains details about the authorisation registers that
            the party uses.
          type: array
          items:
            $ref: '#/components/schemas/auth_registry'
          example:
            - name: iSHARE Test Authorization Registry
              id: EU.EORI.NL000000004
              url: http://ar.isharetest.net/
              dataspace_id: ContaktDS1
              dataspace_name: ContaktDS1
    auth_registry:
      title: auth_registry
      description: >-
        Object which contains details about the authorisation registers that the
        party uses.
      required:
        - name
        - id
        - url
      type: object
      properties:
        name:
          description: The name of the authorisation registry provider
          type: string
          example: iSHARE Test Authorization Registry
        id:
          description: The Id of the authorisation registry provider
          type: string
          example: EU.EORI.NL000000004
        url:
          description: >-
            The URL pointer specific to the party where authorisations can be
            queried/checked from
          type: string
          example: http://ar.isharetest.net/
        dataspace_id:
          description: >-
            The id of the data space where the party uses this authorisation
            registry provider
          type: string
          example: EU.DSP.NL.TESTDATASPACE
        dataspace_name:
          description: The name of the data space corresponding to the data space id
          type: string
          example: TESTDATASPACE
    PartiesInfo:
      title: PartiesInfo
      type: object
      properties:
        count:
          format: int32
          description: Count of parties returned based on search
          type: integer
        data:
          description: Object containing parties information
          type: array
          items:
            $ref: '#/components/schemas/Party'
    SupportedVersion:
      title: SupportedVersion
      description: Contains information about supported version endpoints for each version.
      type: object
      properties:
        version:
          nullable: true
          description: Version of the system which is under support.
          type: string
        supported_features:
          nullable: true
          description: Contins a list of supported features for different access levels.
          type: array
          items:
            $ref: '#/components/schemas/SupportedFeature'
    CertificateAuthority:
      title: CertificateAuthority
      type: object
      properties:
        subject:
          nullable: true
          description: Certificate authority subject name.
          type: string
        certificate_fingerprint:
          nullable: true
          description: SHA256 fingerprint of the certificate.
          type: string
        validity:
          nullable: true
          description: Validity of the certificate. Available values are valid or invalid.
          type: string
        status:
          nullable: true
          description: >-
            Status of the certificate. Available values are granted, withdrawn,
            supervisionceased and undersupervision.
          type: string
    Version:
      title: Version
      type: object
      properties:
        version_name:
          nullable: true
          description: Version name. Expected format should be {major}.{minor}.{patch}.
          type: string
          example: 3.0.0
        valid_from:
          format: date-time
          description: >-
            Timestamp (ISO 8601)/RFC3339. UTC timestamp which states since when
            version is valid.
          type: string
          example: '2030-07-04T08:00:00Z'
        valid_to:
          nullable: true
          format: date-time
          description: >-
            Timestamp (ISO 8601)/RFC3339. UTC timestamp which states till when
            version is valid.
          type: string
          example: '2050-01-04T08:00:00Z'
        version_status:
          allOf:
            - $ref: '#/components/schemas/VersionStatus'
            - {}
    jwt_payload_trusted_list_token:
      title: jwt_payload_trusted_list_token
      required:
        - iss
        - sub
        - aud
        - jti
        - exp
        - iat
        - trusted_list
      type: object
      properties:
        iss:
          description: The id of the issuer of this JWT.
          type: string
          example: EU.EORI.NL123456789
        sub:
          description: The id of the subject of this JWT.
          type: string
          example: EU.EORI.NL123456789
        aud:
          description: The id of the audience of this JWT.
          type: string
          example: EU.EORI.NL123456789
        jti:
          description: JTI value of the JWT.
          type: string
          example: 378a47c4-2822-4ca5-a49a-7e5a1cc7ea59
        exp:
          format: int32
          description: UNIX timestamp in seconds specifying until when this JWT is valid.
          type: integer
          example: 1504684475
        iat:
          format: int32
          description: UNIX timestamp in seconds specifying when this JWT was issued.
          type: integer
          example: 1504683475
        trusted_list:
          description: Contains collection of trusted certificate authorities.
          type: array
          items:
            $ref: '#/components/schemas/CertificateAuthority'
    jwt_payload_parties_token:
      title: jwt_payload_parties_token
      required:
        - iss
        - sub
        - aud
        - jti
        - exp
        - iat
        - parties_info
      type: object
      properties:
        iss:
          description: The id of the issuer of this JWT.
          type: string
          example: EU.EORI.NL123456789
        sub:
          description: The id of the subject of this JWT.
          type: string
          example: EU.EORI.NL123456789
        aud:
          description: The id of the audience of this JWT.
          type: string
          example: EU.EORI.NL123456789
        jti:
          description: jti value of JWT.
          type: string
          example: 378a47c4-2822-4ca5-a49a-7e5a1cc7ea59
        exp:
          format: int32
          description: UNIX timestamp in seconds until when this JWT is valid.
          type: integer
          example: 1504684475
        iat:
          format: int32
          description: UNIX timestamp in seconds when this JWT was issued.
          type: integer
          example: 1504683475
        parties_info:
          allOf:
            - $ref: '#/components/schemas/PartiesInfo'
            - {}
    PartyResponse:
      title: PartyResponse
      type: object
      properties:
        party_token:
          allOf:
            - $ref: '#/components/schemas/jwt_payload_party_token'
            - {}
    service_content:
      properties:
        service_content_1:
          type: string
        service_content_n:
          type: string
    AdditionalInfo:
      title: AdditionalInfo
      description: >-
        Object which contains additional general contact information of the
        party.
      required:
        - publicly_publishable
      type: object
      properties:
        description:
          description: A brief description of the party
          type: string
          example: >-
            Example is a corporation providing example services to its customers
            in example regions
        logo:
          description: URL pointing to the endpoint where company logo can be found.
          type: string
          example: https://www.example.com/logo.png
        website:
          description: Website address of the party
          type: string
          example: https://www.example.com/
        company_phone:
          description: General company phone number of the party
          type: string
        company_email:
          description: General company email id of the party
          type: string
          example: John.doe@example.com
        publicly_publishable:
          description: Consent to publicly publish the information contained in this object
          type: boolean
          example: false
        countries_operation:
          description: An array of ISO names of the countries where the party operates
          type: array
          items:
            type: string
          example: []
        sector_industry:
          description: An array of GICS based sectors/industry that party serves in
          type: array
          items:
            type: string
          example: []
        tags:
          description: An free text field containing keywords relevant for party
          type: string
          example: mobility transport_operator
    Certificate:
      title: Certificate
      description: >-
        Object which contains the details of the PKI/x509 certificates of the
        party.
      required:
        - subject_name
        - certificate_type
        - enabled_from
        - x5c
        - x5t#s256
      type: object
      properties:
        subject_name:
          description: >-
            subjectName as encoded in the X.509 certificate which corresponds
            with the party that is being requested from the iSHARE Satellite.
            Used by the iSHARE Satellite to match the certificate identifier.
          type: string
          example: >-
            SERIALNUMBER=EU.EORI.US000000005,CN=CFMInternational,O=CFMInternational,C=US
        certificate_type:
          description: type of certificate
          type: string
          example: eIDAS eSEAL
        enabled_from:
          format: date-time
          description: UTC timestamp which states since when certificate is valid.
          type: string
          example: '2023-01-31T00:00:00.000Z'
        x5c:
          description: >-
            The base64 encoded pem format value of the certificate identified by
            its subject name and fingerprint
          type: string
          example: |-
            MIIFVzCCAz+gAwIBAgINAgPlk28xsBNJiGuiFzANBgkqhkiG9w0BAQwFADBHMQsw
            CQYDVQQGEwJVUzEiMCAGA1UEChMZR29vZ2xlIFRydXN0IFNlcnZpY2VzIExMQzEU
            MBIGA1UEAxMLR1RTIFJvb3QgUjEwHhcNMTYwNjIyMDAwMDAwWhcNMzYwNjIyMDAw
            MDAwWjBHMQswCQYDVQQGEwJVUzEiMCAGA1UEChMZR29vZ2xlIFRydXN0IFNlcnZp
            Y2VzIExMQzEUMBIGA1UEAxMLR1RTIFJvb3QgUjEwggIiMA0GCSqGSIb3DQEBAQUA
            A4ICDwAwggIKAoICAQC2EQKLHuOhd5s73L+UPreVp0A8of2C+X0yBoJx9vaMf/vo
            27xqLpeXo4xL+Sv2sfnOhB2x+cWX3u+58qPpvBKJXqeqUqv4IyfLpLGcY9vXmX7w
            Cl7raKb0xlpHDU0QM+NOsROjyBhsS+z8CZDfnWQpJSMHobTSPS5g4M/SCYe7zUjw
            TcLCeoiKu7rPWRnWr4+wB7CeMfGCwcDfLqZtbBkOtdh+JhpFAz2weaSUKK0Pfybl
            qAj+lug8aJRT7oM6iCsVlgmy4HqMLnXWnOunVmSPlk9orj2XwoSPwLxAwAtcvfaH
            szVsrBhQf4TgTM2S0yDpM7xSma8ytSmzJSq0SPly4cpk9+aCEI3oncKKiPo4Zor8
            Y/kB+Xj9e1x3+naH+uzfsQ55lVe0vSbv1gHR6xYKu44LtcXFilWr06zqkUspzBmk
            MiVOKvFlRNACzqrOSbTqn3yDsEB750Orp2yjj32JgfpMpf/VjsPOS+C12LOORc92
            wO1AK/1TD7Cn1TsNsYqiA94xrcx36m97PtbfkSIS5r762DL8EGMUUXLeXdYWk70p
            aDPvOmbsB4om3xPXV2V4J95eSRQAogB/mqghtqmxlbCluQ0WEdrHbEg8QOB+DVrN
            VjzRlwW5y0vtOUucxD/SVRNuJLDWcfr0wbrM7Rv1/oFB2ACYPTrIrnqYNxgFlQID
            AQABo0IwQDAOBgNVHQ8BAf8EBAMCAYYwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4E
            FgQU5K8rJnEaK0gnhS9SZizv8IkTcT4wDQYJKoZIhvcNAQEMBQADggIBAJ+qQibb
            C5u+/x6Wki4+omVKapi6Ist9wTrYggoGxval3sBOh2Z5ofmmWJyq+bXmYOfg6LEe
            QkEzCzc9zolwFcq1JKjPa7XSQCGYzyI0zzvFIoTgxQ6KfF2I5DUkzps+GlQebtuy
            h6f88/qBVRRiClmpIgUxPoLW7ttXNLwzldMXG+gnoot7TiYaelpkttGsN/H9oPM4
            7HLwEXWdyzRSjeZ2axfG34arJ45JK3VmgRAhpuo+9K4l/3wV3s6MJT/KYnAK9y8J
            ZgfIPxz88NtFMN9iiMG1D53Dn0reWVlHxYciNuaCp+0KueIHoI17eko8cdLiA6Ef
            MgfdG+RCzgwARWGAtQsgWSl4vflVy2PFPEz0tv/bal8xa5meLMFrUKTX5hgUvYU/
            Z6tGn6D/Qqc6f1zLXbBwHSs09dR2CQzreExZBfMzQsNhFRAbd03OIozUhfJFfbdT
            6u9AWpQKXCBfTkBdYiJ23//OYb2MI3jSNwLgjt7RETeJ9r/tSQdirpLsQBqvFAnZ
            0E6yove+7u7Y/9waLd64NnHi/Hm3lCXRSHNboTXns5lndcEZOitHTtNCjv0xyBZm
            2tIMPNuzjsmhDYAPexZ3FL//2wmUspO8IFgV6dtxQ/PeEMMA3KgqlbbC1j+Qa3bb
            bP6MvPJwNQzcmRk13NfIRmPVNnGuV/u3gm3c
        x5t#s256:
          description: The SHA256 fingerprint of the certificate
          type: string
          example: 4E4FD2B1D7D5DF3858CDAA80DE02AD4E0C530939BB65C57E18CEADA431C6872C
    jwt_payload_versions_token:
      title: jwt_payload_versions_token
      description: >-
        It contains iSHARE compliant JWT claims. In addition to that it also
        contains the following parameters
      required:
        - iss
        - sub
        - jti
        - exp
        - iat
        - versions_info
      type: object
      properties:
        iss:
          description: The id of the issuer of this JWT.
          type: string
          example: EU.EORI.NL123456789
        sub:
          description: The id of the subject of this JWT.
          type: string
          example: EU.EORI.NL123456789
        aud:
          description: The id of the audience of this JWT.
          type: string
          example: EU.EORI.NL123456789
        jti:
          description: JTI value of JWT.
          type: string
          example: 378a47c4-2822-4ca5-a49a-7e5a1cc7ea59
        exp:
          format: int32
          description: UNIX timestamp in seconds until when this JWT is valid.
          type: integer
          example: 1504684475
        iat:
          format: int32
          description: UNIX timestamp in seconds when this JWT was issued.
          type: integer
          example: 1504683475
        versions_info:
          allOf:
            - $ref: '#/components/schemas/Version'
            - {}
    jwt_payload_capabilities_token:
      title: jwt_payload_capabilities_token
      required:
        - iss
        - sub
        - jti
        - exp
        - iat
        - capabilities_info
      type: object
      properties:
        iss:
          type: string
          example: EU.EORI.NL123456789
        sub:
          type: string
          example: EU.EORI.NL123456789
        aud:
          type: string
          example: EU.EORI.NL123456789
        jti:
          type: string
          example: 378a47c4-2822-4ca5-a49a-7e5a1cc7ea59
        exp:
          format: int32
          type: integer
          example: 1504683475
        iat:
          format: int32
          type: integer
          example: 1504683475
        capabilities_info:
          allOf:
            - $ref: '#/components/schemas/CapabilitiesInfo'
            - {}
    Agreement:
      title: Agreement
      description: >-
        Object which contains details about contracts including data space
        contracts that party has agreed and signed to.
      required:
        - type
        - title
        - status
        - sign_date
        - expiry_date
        - framework
        - complaiancy_verified
      type: object
      properties:
        type:
          description: >-
            Type of agreement. Refers to the official type of agreement. For
            iSHARE following types are available Terms of Use, Accession
            Agreement, Certified Party Agreement, Satellite Agreement.
            Additionally, each data space can define their own type and it can
            be listed here when appropriate dataspace is chosen
          type: string
          example: TermsOfUse
        title:
          description: The name of the agreement or agreement file
          type: string
          example: iSHARE-TOU-party1
        status:
          description: >-
            Status of the agreement. Available values are Draft, Signed,
            Accepted, Obsolete.
          type: string
          example: Accepted
        sign_date:
          format: date-time
          description: Date of signature of the agreement.
          type: string
          example: '2023-01-31T00:00:00.000Z'
        expiry_date:
          format: date-time
          description: >-
            Expiry date of the agreement. For non expiring agreements the end
            date is far in future
          type: string
          example: '2024-01-31T00:00:00.000Z'
        hash_file:
          description: >-
            The calculated hash of the agreement file that has been uploaded.
            Note agreements are not stored in ledger, but only their hash.
          type: string
          example: 614331b0003219f2d2d123b0cd6105fb
        framework:
          description: >-
            The trust framework to which this agreement complies to. Currently,
            only iSHARE is available.
          type: string
          example: iSHARE
        dataspace_id:
          description: >-
            The ID of the data space. If specified, party is onboarded in
            accordance to this data space's terms and conditions
          type: string
          example: EU.DSP.NL.TESTDATASPACE
        dataspace_title:
          description: The name of the selected dataspace
          type: string
          example: Dutch Test Dataspace
        complaiancy_verified:
          description: >-
            Legal compliance to this agreement has been verified in accordance
            with the process set in trust framework as we as data space
            governance. Possible values are Yes, No, Not Applicable
          type: string
          example: 'Yes'
    Role_definition:
      title: Role_definition
      description: >-
        Object which contains details about the iSHARE roles of the party. The
        details include the level of assurance as well as compliance status for
        each role.
      required:
        - role
        - start_date
        - end_date
        - loa
        - compliancy_verified
        - legal_adherence
      type: object
      properties:
        role:
          description: >-
            Name of the role as defined in iSHARE role framework. Possible roles
            are  ServiceConsumer, ServiceProvider, EntitledParty,
            AuthorisationRegistry,  IdentityProvider, IdentityBroker and
            iShareSatellite.
          type: string
          example: ServiceConsumer
        start_date:
          format: date-time
          description: >-
            UTC timestamp which states since when this role for the party is
            valid.
          type: string
          example: '2023-01-31T00:00:00.000Z'
        end_date:
          format: date-time
          description: >-
            UTC timestamp which states till when this role for the party is
            valid.
          type: string
          example: '2024-01-31T00:00:00.000Z'
        loa:
          description: >-
            Party's level of assurance. Available values are low, substantial
            and high.
          type: string
          example: High
        compliancy_verified:
          description: Compliance requirements of this role has been met by party
          type: boolean
          example: true
        legal_adherence:
          description: >-
            Legal requirements of this role has been met by party including
            signing of appropriate agreements
          type: boolean
          example: true
    Spor:
      title: Spor
      description: >-
        The signed proof received from recognised issuer (currently eID identity
        providers) of information about the organisation and the authorised
        representative of that organisation being authenticated with "High"
        level of assurance
      required:
        - signed_request
      type: object
      properties:
        signed_request:
          description: >-
            verifiable credentials of the participant signed by a trusted
            authority vouching for its authenticity
          type: string
          example: f1aec63b5b6f545718dc1c86efda3a9e8d8c74c4c2af42b39d9e8d41f3fc2b4e
    CapabilitiesInfo:
      title: CapabilitiesInfo
      type: object
      properties:
        party_id:
          nullable: true
          description: >-
            Party ID, also known as EORI number of the party which provides the
            capabilities info.
          type: string
        ishare_roles:
          nullable: true
          description: >-
            Contains array of role objects that provide the information about
            the roles of the party in iSHARE.
          type: array
          items:
            $ref: '#/components/schemas/SchemeRole'
        supported_versions:
          nullable: true
          description: >-
            Contains information about supported version endpoints for each
            version.
          type: array
          items:
            $ref: '#/components/schemas/SupportedVersion'
    VersionStatus:
      title: VersionStatus
      description: Status of the version. Available values are active and planned.
      enum:
        - inactive
        - active
        - planned
      type: string
      example: planned
      x-enum-elements:
        - name: inactive
          description: ''
        - name: active
          description: ''
        - name: planned
          description: ''
    jwt_payload_ep_creation_token:
      title: jwt_payload_ep_creation_token
      required:
        - iss
        - sub
        - aud
        - jti
        - exp
        - iat
        - nbf
        - parties_info
        - status
      type: object
      properties:
        iss:
          description: The id of the issuer of this JWT.
          type: string
          example: EU.EORI.NL123456789
        sub:
          description: The id of the subject of this JWT.
          type: string
          example: EU.EORI.NL123456789
        aud:
          description: The id of the audience of this JWT.
          type: string
          example: EU.EORI.NL123456789
        jti:
          description: JTI value of JWT.
          type: string
          example: 378a47c4-2822-4ca5-a49a-7e5a1cc7ea59
        exp:
          format: int32
          description: UNIX timestamp in seconds until when this JWT is valid.
          type: integer
          example: 1504684475
        iat:
          format: int32
          description: UNIX timestamp in seconds when this JWT was issued.
          type: integer
          example: 1504683475
        nbf:
          format: int32
          description: UNIX timestamp in seconds since when this JWT is valid.
          type: integer
          example: 1504683475
        parties_info:
          allOf:
            - $ref: '#/components/schemas/Party'
            - {}
        status:
          description: Status of the request for creation of entitled party
          type: string
          example: success
    TrustedListResponse:
      title: TrustedListResponse
      type: object
      properties:
        trusted_list_token:
          type: string
    VersionsResponse:
      title: VersionsResponse
      type: object
      properties:
        versions_token:
          type: string
    CapabilitiesResponse:
      title: CapabilitiesResponse
      type: object
      properties:
        capabilities_token:
          type: string
    PartiesResponse:
      title: PartiesResponse
      type: object
      properties:
        parties_token:
          type: string
    DataspaceInfo:
      title: DataspaceInfo
      type: object
      properties:
        total_count:
          format: int32
          description: Total count of found dataspaces
          type: integer
        page_count:
          format: int32
          description: Number of pages (10 per page)
          type: integer
        count:
          format: int32
          description: Number of dataspaces returned
          type: integer
        data:
          description: Object containing dataspace information
          type: array
          items:
            $ref: '#/components/schemas/Dataspace'
    DataspacesResponse:
      title: DataspacesResponse
      type: object
      properties:
        dataspace_list_token:
          type: string
    jwt_payload_dataspace_list_token:
      title: jwt_payload_dataspace_list_token
      required:
        - iss
        - sub
        - aud
        - jti
        - exp
        - iat
        - dataspaces_info
      type: object
      properties:
        iss:
          description: The id of the issuer of this JWT.
          type: string
          example: EU.EORI.NL123456789
        sub:
          description: The id of the subject of this JWT.
          type: string
          example: EU.EORI.NL123456789
        aud:
          description: The id of the audience of this JWT.
          type: string
          example: EU.EORI.NL123456789
        jti:
          description: jti value of JWT.
          type: string
          example: 378a47c4-2822-4ca5-a49a-7e5a1cc7ea59
        exp:
          format: int32
          description: UNIX timestamp in seconds until when this JWT is valid.
          type: integer
          example: 1504684475
        iat:
          format: int32
          description: UNIX timestamp in seconds when this JWT was issued.
          type: integer
          example: 1504683475
        dataspace_info:
          allOf:
            - $ref: '#/components/schemas/DataspaceInfo'
    Dataspace:
      title: Dataspace
      type: object
      properties:
        dataspace_id:
          description: >-
            Unique ID of the dataspace. This is in format of <Continent>.<DS>.<3
            letter code for dataspaces>.<Country>.<dataspace name> for example
            EU.DS.GND.NL.DVU. Where, continent is 2 letter code, followed by
            “DS” (stands for dataspace), followed by 3 letter code of common eu
            dataspaces HLT - Health, INM - Industrial and Manufacturing, AGR -
            Agriculture, FIN - Finance, MOB - Mobility, GND - Green Deal, ENR -
            Energy, PUB - Public Administration, SKL - Skills, followed by ISO
            3166-1 alpha-2 2 letter Country code and lastly the name/title of
            the dataspace. Name may not contain spaces or dot “.” or other
            special characters. Maximum length of name can be 15 characters.
          type: string
          example: EU.DS.NL.DLDS_Logistics
        dataspace_title:
          description: Title of dataspace.
          type: string
          example: DLDS_Logistics_DataSpace
        dataspacedef_url:
          description: >-
            URL pointing to the dataspace definition. This is expected to be
            based on OpenDEI model of building blocks for dataspaces. The
            machine redable format definition is currently under development.
            The specifications will be made available once published.
          type: string
          example: https://www.example.com/definition
        dataspace_website:
          description: >-
            Website address of the dataspace, typically dataspace authority. The
            website details out more information about the datasapce and guides
            (potential) participants (to become member of) the dataspace.
          type: string
          example: https://www.example.com
        tags:
          description: >-
            Free text field for addting relevant tags that are relevant in the
            context of datasapce. It useful for searching for specific
            dataspaces based on tags.
          type: string
          example: '#logistics #NL'
        status:
          description: >-
            Status of the dataspace. Available values are new, in progress,
            active and not active.
          type: string
          example: active
        country_reg:
          description: Country in which the dataspace is registered in.
          type: string
          example: The Netherlands
        countries_operation:
          description: Array of country names in which the dataspace operates.
          type: array
          items:
            type: string
          example:
            - The Netherlands
            - Germany
        sectors:
          description: Array of sector names in which the dataspace operates.
          type: array
          items:
            type: string
          example:
            - Information Technology
            - Logistics
    ConnectTokenResponse:
      title: ConnectTokenResponse
      type: object
      properties:
        access_token:
          type: string
        token_type:
          type: string
        expires_in:
          type: number
    EpCreationRequest:
      title: ep_creation_request
      required:
        - ep_creation_token
      type: object
      properties:
        ep_creation_token:
          type: string
    EpCreationResponse:
      title: ep_creation_response
      required:
        - ep_creation_token
      type: object
      properties:
        ep_creation_token:
          type: string
    DelegationRequestBody:
      description: >-
        The model used for request body in /delegation endpoint, for obtaining
        delegation evidence.
      required:
        - delegationRequest
        - policyIssuer
        - target
        - policySets
      type: object
      properties:
        delegationRequest:
          required:
            - policyIssuer
            - target
            - policySets
          type: object
          properties:
            policyIssuer:
              type: string
            target:
              required:
                - accessSubject
              type: object
              properties:
                accessSubject:
                  type: string
            policySets:
              type: array
              items:
                $ref: '#/components/schemas/PolicySet_evidence_request'
        delegation_path:
          type: array
          items:
            type: string
        previous_steps:
          type: array
          items:
            type: string
    PolicySet:
      required:
        - policies
      type: object
      properties:
        maxDelegationDepth:
          type: integer
        target:
          type: object
          properties:
            environment:
              type: object
              properties:
                licenses:
                  type: array
                  items:
                    type: string
        policies:
          type: array
          items:
            $ref: '#/components/schemas/Policy'
    PolicySet_evidence_request:
      required:
        - policies
      type: object
      properties:
        target:
          type: object
          properties:
            environment:
              type: object
              properties:
                licenses:
                  type: array
                  items:
                    type: string
        policies:
          type: array
          items:
            $ref: '#/components/schemas/Policy_request_evidence'
    Policy:
      required:
        - target
        - rules
      type: object
      properties:
        target:
          required:
            - resource
            - actions
          type: object
          properties:
            resource:
              required:
                - type
                - identifiers
                - attributes
              type: object
              properties:
                type:
                  type: string
                identifiers:
                  type: array
                  items:
                    type: string
                attributes:
                  type: array
                  items:
                    type: string
            actions:
              type: array
              items:
                type: string
            environment:
              type: object
              properties:
                serviceProviders:
                  type: array
                  items:
                    type: string
        rules:
          type: array
          items:
            required:
              - effect
            type: object
            properties:
              effect:
                type: string
    Policy_request_evidence:
      required:
        - target
        - rules
      type: object
      properties:
        target:
          required:
            - resource
            - actions
          type: object
          properties:
            resource:
              required:
                - type
                - identifiers
                - attributes
              type: object
              properties:
                type:
                  type: string
                identifiers:
                  type: array
                  items:
                    type: string
                attributes:
                  type: array
                  items:
                    type: string
            actions:
              type: array
              items:
                type: string
        rules:
          type: array
          items:
            required:
              - effect
            type: object
            properties:
              effect:
                type: string
    jwt_payload_delegation_evidence:
      required:
        - delegationEvidence
      type: object
      properties:
        delegationEvidence:
          required:
            - notBefore
            - notOnOrAfter
            - policyIssuer
            - target
            - policySets
          type: object
          properties:
            notBefore:
              type: integer
            notOnOrAfter:
              type: integer
            policyIssuer:
              type: string
            target:
              required:
                - accessSubject
              type: object
              properties:
                accessSubject:
                  type: string
            policySets:
              type: array
              items:
                $ref: '#/components/schemas/PolicySet'
    DelegationResponse:
      title: DataspacesResponse
      type: object
      properties:
        delegation_token:
          type: string
    openid-authorize:
      required:
        - code
        - state
      properties:
        code:
          type: string
        state:
          type: string
    UserinfoResponse:
      title: DataspacesResponse
      type: object
      properties:
        userinfo_token:
          type: string
  parameters:
    authorization-optional:
      deprecated: false
      name: Authorization
      description: >-
        OAuth 2.0 authorization based on bearer token. MUST contain “Bearer ” +
        access token value. How to retrieve the access token can be found at
        Access Token Endpoint section.
      schema:
        type: string
      in: header
      required: false
    authorization-required:
      deprecated: false
      name: Authorization
      description: >-
        OAuth 2.0 authorization based on bearer token. MUST contain “Bearer ” +
        access token value. How to retrieve the access token can be found at
        Access Token Endpoint section.
      schema:
        type: string
      in: header
      required: true
    delegation-evidence:
      deprecated: false
      name: delegation_evidence
      description: >-
        iSHARE delegation evidence regarding the requested service. The Service
        Consumer can obtain this evidence from an Authorization Registry /
        Entitled Party before requesting a specific service.
      schema:
        type: string
      in: header
      required: false
    delegation_evidence_header:
      name: delegation_evidence
      description: >-
        iSHARE delegation evidence regarding the requested service. The Service 
        Consumer can obtain this evidence from an Authorization Registry / 
        Entitled Party before requesting a specific service.
      schema:
        type: string
      in: header
    service_consumer_id_token_sc:
      name: service_consumer_assertion
      description: >-
        iSHARE specific optional client assertion. Used when a Service Consumer
        is requesting a service on behalf of another Service Consumer in a 
        'service broker' pattern. It is used to prove that the 'brokering' 
        Service Consumer indeed has had a request from the original Service 
        Consumer
      schema:
        type: string
      in: header
    purpose:
      name: LicensePurpose
      description: >-
        Optional iSHARE specific value describing the purpose of the license the
        Service Consuming Entity requests for the data in the service response
      schema:
        type: string
      in: header
    service_headers:
      name: Service-Headers
      description: Any service specific headers
      schema:
        type: string
      in: header
    content-type_form:
      deprecated: false
      example: x-www-form-urlencoded
      name: Content-Type
      description: >-
        Defines request body content type. MUST be equal to
        application/x-www-form-urlencoded.
      schema:
        type: string
      in: header
      required: true
  securitySchemes:
    Bearer:
      type: apiKey
      description: >-
        Oauth 2.0 authorization based on bearer token. MUST contain ”Bearer” +
        access token value
      name: Authorization
      in: header
  headers: {}
  responses: {}
tags:
  - name: iSHARE Satellite
    description: Endpoints that form the iSHARE Satellite API specification.
  - name: Service Provider
    description: Endpoints that form the Service Provider API specification.
  - name: Identity Provider
    description: Endpoints that form the Identity Provider API specification.
  - name: Authorisation Registry
    description: Endpoints that form the Authorisation Registry API specification.
security: []
